webpackJsonp([1],{NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("7+uW"),s=i("mvHQ"),a=i.n(s),r=i("c/Tr"),l=i.n(r),o={name:"StretchableTextarea",props:{value:String,strike:Boolean},computed:{_value:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},mounted:function(){this.resize(),0===this.$el.value.length&&this.$el.select()},methods:{onLeave:function(e){this.$emit("leave",e)},onInput:function(e){this.resize(),this.$emit("textchange",e,this)},onPaste:function(e){var t=this;l()(e.clipboardData.files).filter(function(e){return e.type.indexOf("image/")>=0}).forEach(function(e){t.$emit("imagepasted",e)})},resize:function(){this.$el.style.height="0",this.$el.style.height=this.$el.scrollHeight+"px"},insertTab:function(e){if(9===e.keyCode){e.preventDefault&&e.preventDefault();var t=event.target.value,i=event.target.selectionStart;event.target.value=t.slice(0,i)+"\t"+t.slice(i),event.target.selectionStart=i+1,event.target.selectionEnd=i+1}}}},c={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("textarea",{directives:[{name:"model",rawName:"v-model",value:e._value,expression:"_value"}],staticClass:"memo__txt",class:{memo__txt_strike:e.strike},attrs:{spellcheck:"false",contenteditable:"true"},domProps:{value:e._value},on:{input:[function(t){t.target.composing||(e._value=t.target.value)},function(t){e.onInput(t)}],blur:e.onLeave,keydown:e.insertTab,paste:e.onPaste}})},staticRenderFns:[]},d=i("VU/8")(o,c,!1,null,null,null).exports,h={name:"CaptionAndImage",props:{value:String,cssclass:String},methods:{deleteThis:function(){confirm("do you delete this image?")&&this.$emit("deleted",this)}}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("img",{class:this.cssclass,attrs:{src:this.value}}),this._v(" "),t("a",{staticClass:"btn__delete_image",on:{click:this.deleteThis}},[t("span",{staticClass:"cross"})])])},staticRenderFns:[]},m={name:"MemoTree",components:{StretchableTextarea:d,StretchableImage:i("VU/8")(h,u,!1,null,null,null).exports},props:{item:{type:Object,required:!0}},computed:{showTodoIcon:{get:function(){return 1===this.item.todo||!this.item.expanded&&function e(t){if(1===t.todo)return!0;if(void 0!==t.children&&t.children.filter(function(t){return e(t)}).length>0)return!0;return!1}(this.item)}},todoButtonText:{get:function(){switch(this.item.todo){case 1:return"done";case 2:return"reset";default:return"todo"}}}},mounted:function(){var e=this.$refs.divHeader.clientWidth>500;this.$refs.divHeader.classList.add(e?"memo__header_inbody":"memo__header_outbody")},methods:{save:function(){this.$emit("save")},switchTodo:function(){var e=void 0;switch(this.item.todo){case 1:e=2;break;case 2:e=0;break;default:e=1}this.$set(this.item,"todo",e)},switchExpand:function(){this.item.children?this.$set(this.item,"expanded",!this.item.expanded):this.$set(this.item,"expanded",!0)},deleteMe:function(){this.$emit("remove",this.item)},deleteIfEmpty:function(e){e.target.value||this.item.children&&this.item.children.length||this.deleteMe()},removeChild:function(e){this.item.children=this.item.children.filter(function(t){return t!==e});var t=this;window.setTimeout(function(){for(var e=0;e<t.$refs.childItem.length;e++)t.$refs.childItem[e].resize()},10)},addChild:function(e,t){void 0===this.item.children&&this.$set(this.item,"children",[]),this.item.children.push({addDt:this.formatDate(new Date,"YYYY-MM-DD hh:mm"),expanded:!0,type:e,value:t}),this.$set(this.item,"expanded",!0)},addChildImage:function(e){var t=this,i=new FileReader;i.onload=function(){t.addChild(1,i.result)},i.readAsDataURL(e)},resize:function(){this.$refs.textItem.resize()},formatDate:function(e,t){if(t||(t="YYYY-MM-DD hh:mm:ss.SSS"),(t=(t=(t=(t=(t=(t=t.replace(/YYYY/g,e.getFullYear())).replace(/MM/g,("0"+(e.getMonth()+1)).slice(-2))).replace(/DD/g,("0"+e.getDate()).slice(-2))).replace(/hh/g,("0"+e.getHours()).slice(-2))).replace(/mm/g,("0"+e.getMinutes()).slice(-2))).replace(/ss/g,("0"+e.getSeconds()).slice(-2))).match(/S/g))for(var i=("00"+e.getMilliseconds()).slice(-3),n=t.match(/S/g).length,s=0;s<n;s++)t=t.replace(/S/,i.substring(s,s+1));return t}}},v={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",[i("div",{staticClass:"memo",class:{todo:1===e.item.todo}},[e.showTodoIcon?i("span",{staticClass:"icon__todo"},[e._v("ï¼")]):e._e(),e._v(" "),i("div",{ref:"divHeader"},[i("span",{staticClass:"memo__timestamp"},[e._v(e._s(e.item.addDt))]),e._v(" "),i("a",{staticClass:"btn",on:{click:function(t){e.addChild(0,"")}}},[i("span",{staticClass:"plus"})]),e._v(" "),i("a",{staticClass:"btn",on:{click:e.switchTodo}},[e._v(e._s(e.todoButtonText))]),e._v(" "),i("a",{staticClass:"btn",staticStyle:{"min-width":"20px"},on:{click:e.switchExpand}},[e._v("\n        "+e._s(e.item.expanded?"-":e.item.children?e.item.children.length:"0")+"\n      ")])]),e._v(" "),i("div",{staticClass:"memo__body"},[0===e.item.type?i("stretchable-textarea",{ref:"textItem",attrs:{strike:2===e.item.todo},on:{textchange:e.save,leave:e.deleteIfEmpty,imagepasted:e.addChildImage},model:{value:e.item.value,callback:function(t){e.$set(e.item,"value",t)},expression:"item.value"}}):e._e(),e._v(" "),1===e.item.type?i("stretchable-image",{attrs:{value:e.item.value,cssclass:"memo__img"},on:{deleted:e.deleteMe}}):e._e()],1)]),e._v(" "),e.item.expanded?i("transition-group",{staticClass:"memo__children",attrs:{tag:"ul"}},e._l(e.item.children,function(t,n){return i("memo-tree",{key:n,ref:"childItem",refInFor:!0,staticClass:"memo__child",attrs:{item:t},on:{remove:function(t){e.removeChild(t),e.save()},save:e.save}})})):e._e()],1)},staticRenderFns:[]},f={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],attrs:{type:"text"},domProps:{value:e.searchTerm},on:{blur:e.onBlur,input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}}),e._v(" "),i("a",{staticClass:"btn",on:{click:e.search}},[e._v("search")])])},staticRenderFns:[]},p={name:"MemoRoot",components:{MemoTree:i("VU/8")(m,v,!1,null,null,null).exports,Searcher:i("VU/8")({name:"Searcher",data:function(){return{searchTerm:""}},methods:{onBlur:function(){0===this.searchTerm.length&&this.$emit("search","")},search:function(){this.$emit("search",this.searchTerm)}}},f,!1,null,null,null).exports},data:function(){return{addDt:this.formatDate(new Date,"YYYY-MM-DD hh:mm"),expanded:!0,type:0,value:"",children:[],searchTerm:"",onlyTodo:!1}},computed:{filteredChildren:function(){var e=this.searchTerm,t=this.onlyTodo;return this.children.filter(function(i){return function i(n){if((0===e.length||n.value.indexOf(e)>=0)&&(!t||1===n.todo))return!0;if(void 0!==n.children&&n.children.filter(function(e){return i(e)}).length>0)return!0;return!1}(i)})}},methods:{delayResize:function(){for(var e=0;e<this.$refs.childItem.length;e++)this.$refs.childItem[e].resize()},removeChild:function(e){this.children=this.children.filter(function(t){return t!==e}),window.setTimeout(this.delayResize,10)},addRootMemo:function(){this.search(""),this.children.push({addDt:this.formatDate(new Date,"YYYY-MM-DD hh:mm"),expanded:!0,type:0,value:""})},save:function(){var e=a()({value:this.value,children:this.children});localStorage.setItem("halOutliner",e)},clear:function(){confirm("clear?")&&(this.value="",this.children=[])},download:function(){var e=a()({value:this.value,children:this.children}),t=this.$el.getElementsByClassName("download");if(t){var i=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(i);t[0].href=n,t[0].download=this.value?this.value:"HalOutliner"}},restore:function(){var e=window.prompt("paset JSON here",""),t=JSON.parse(e);t&&(this.value=t.value,this.children=t.children)},search:function(e){this.searchTerm=e,window.setTimeout(this.delayResize,10)},formatDate:function(e,t){if(t||(t="YYYY-MM-DD hh:mm:ss.SSS"),(t=(t=(t=(t=(t=(t=t.replace(/YYYY/g,e.getFullYear())).replace(/MM/g,("0"+(e.getMonth()+1)).slice(-2))).replace(/DD/g,("0"+e.getDate()).slice(-2))).replace(/hh/g,("0"+e.getHours()).slice(-2))).replace(/mm/g,("0"+e.getMinutes()).slice(-2))).replace(/ss/g,("0"+e.getSeconds()).slice(-2))).match(/S/g))for(var i=("00"+e.getMilliseconds()).slice(-3),n=t.match(/S/g).length,s=0;s<n;s++)t=t.replace(/S/,i.substring(s,s+1));return t}},created:function(){var e=localStorage.getItem("halOutliner");if(null!==e){var t=JSON.parse(e);this.value=t.value,this.children=t.children}window.addEventListener("beforeunload",function(e){e.returnValue="caution!"},!1)}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"divBook",staticClass:"book"},[i("div",{staticStyle:{"text-align":"right"}},[i("searcher",{on:{search:e.search}}),e._v(" "),i("label",{attrs:{for:"only_todo"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.onlyTodo,expression:"onlyTodo"}],attrs:{type:"checkbox",id:"only_todo"},domProps:{checked:Array.isArray(e.onlyTodo)?e._i(e.onlyTodo,null)>-1:e.onlyTodo},on:{change:function(t){var i=e.onlyTodo,n=t.target,s=!!n.checked;if(Array.isArray(i)){var a=e._i(i,null);n.checked?a<0&&(e.onlyTodo=i.concat([null])):a>-1&&(e.onlyTodo=i.slice(0,a).concat(i.slice(a+1)))}else e.onlyTodo=s}}}),e._v("only todo\n    ")]),e._v(" "),i("a",{staticClass:"btn",on:{click:e.clear}},[e._v("clear")]),e._v(" "),i("a",{staticClass:"btn download",on:{click:e.download}},[e._v("export")]),e._v(" "),i("a",{staticClass:"btn",on:{click:e.restore}},[e._v("import")])],1),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"title",attrs:{type:"text",placeholder:"title",spellcheck:"false"},domProps:{value:e.value},on:{input:[function(t){t.target.composing||(e.value=t.target.value)},e.save]}}),e._v(" "),i("ul",{staticClass:"memo__children",staticStyle:{"padding-left":"0"}},e._l(e.filteredChildren,function(t,n){return i("memo-tree",{key:n,ref:"childItem",refInFor:!0,staticClass:"memo__child",attrs:{item:t},on:{remove:function(t){e.removeChild(t),e.save()},save:e.save}})})),e._v(" "),i("a",{staticClass:"btn memo__child",on:{click:e.addRootMemo}},[i("span",{staticClass:"plus"})])])},staticRenderFns:[]};var _=i("VU/8")(p,g,!1,function(e){i("kbLu")},null,null).exports;n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:_},template:"<App/>"})},kbLu:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.3fdc0797db5035f80726.js.map